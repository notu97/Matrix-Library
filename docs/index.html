<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Matrix Library: Matrix-Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Matrix Library
   </div>
   <div id="projectbrief">A simple Matrix operation library to perform Matrix Multiplication and find the transpose of a Matrix.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Matrix-Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A simple Matrix library to perform Matrix operations namely Matrix Multiplication and Transpose. The library is divided into 2 parts, one for Matrix operations on small Matrices (class Matrix) and other for Large Matrices (class BigMatrix). The complete code documentation generated by Doxygen can be found <a href="https://notu97.github.io/Matrix-Library/index.html">here</a>.</p>
<p>Matrix multiplication for small matrices is done using the straight forward solution with time complexity <code>O(n^3)</code>. While for large matrices the Matrix multiplication is done using the Strassen's Algorithm that has Time Complexity of approximatley <code>O(n^2.8)</code>.</p>
<p>For Large Matrices the input is taken in a Comma Separated Variable (csv) file format, and the output is stored in a csv file. For small matrices the user has to manually enter the values of the matrix either using a initializer_list format or as a 2D vector.</p>
<h2>Installation and Configuration</h2>
<p>Just include the <a href="https://github.com/notu97/Matrix-Library/blob/main/matrix.h">matrix.h</a> header file in your C++ working directory and include it in your main cpp code using <code>#include"matirx.h"</code>. Inorder to get the best performance from this library for large Matrix Multiplicaiton, one has to experimentally find out and set the <code>LEAF_SIZE</code> for the Stressan's Multiplcation function. The <code>LEAF_SIZE</code> value modifies the Resursion base condition. Once a Matrix of size <code>LEAF_SIZE</code> x <code>LEAF_SIZE</code> or lesser is reached we shift to the Native <code>O(n^3)</code> Matrix Multiplication solution. The Value of <code>LEAF_SIZE</code> has the following effect:</p><ul>
<li>A very high value of <code>LEAF_SIZE</code> leads to lesser resursion calls but ends up giving more weightage to the <code>O(n^3)</code> solution.</li>
<li>On the other hand a very low <code>LEAF_SIZE</code> value leads to higher number of resursion calls and gives lesser weightage to the <code>O(n^3)</code> solution.</li>
</ul>
<p>Both the above scenarios adversely effects the execution time of Matrix Multiplication and added to that the value of <code>LEAF_SIZE</code> will vary from machine to machine. Thus we have to experimentally determine the <code>LEAF_SIZE</code> value from the computer on which this library will be used. In order to do this a <a href="https://github.com/notu97/Matrix-Library/blob/main/configure_lib.cpp">configure_lib.cpp</a> and its corresponding object file <code>configure_lib</code> is provided with this library. This file performs Matrix Multiplication between 2 large matrices A &amp; B (the config file asks the path to A.csv and B.csv while running) using the <code>matmul</code> funtion (defined in class <code>BigMatrix</code>) for <code>N_epoch</code> no. of times for a given <code>leaf_size</code> and finds the average execution times for this particular <code>leaf_size</code>. Finally <code>leaf_size</code> is also varied between <code>SIZE_Lower</code> and <code>SIZE_Upper</code>, whichever <code>leaf_size</code> value gives the lowest execution time is our most optimal value of <code>LEAF_SIZE</code>. The command to find the optimal <code>LEAF_SIZE</code> is as follows:</p>
<div class="fragment"><div class="line">$ g++ configure_lib.cpp -o configure_lib -DSET_LEAF_SIZE</div><div class="line">$ ./configure_lib &lt;N_epoch&gt; &lt;SIZE_Lower&gt; &lt;SIZE_Upper&gt;</div></div><!-- fragment --><p> Note: Since I have used the most simplest Stressan's Algorithm implmentation, where by both the input matrices are padded with zeros to make there size equal to the next largest power of 2, the matrix size is always a power of 2. Hence the <code>SIZE_Lower</code> and <code>SIZE_Upper</code> values should always be a power of 2.</p>
<p>On my computer, for two Matrices A.csv and B.csv of size 2000x2000 of integer type and <code>N_epoch</code>= 10, <code>SIZE_Lower</code>=16 <code>SIZE_Upper</code>=128 the optimal <code>LEAF_SIZE</code> was found out to be <code>64</code> i.e. once we encounter an array of size less than or equal to 64x64 we shift to <code>O(n^3)</code> solution of Matrix Multiplication. A plot of execution time as a function of <code>LEAF_SIZE</code> on my computer is shown below.</p>
<div class="image">
<img src="Time_vs_Leaf_Size_plot.png" alt="Time_vs_leaf_size"/>
</div>
<h2>Usage</h2>
<h3>Matrix Class (for small Matrices)</h3>
<h4>Defining a small Matrix of size 3x4 of type float</h4>
<p>Using initilizer list </p><div class="fragment"><div class="line">MATOPS::Matrix&lt;float,3,4&gt; A{{1,2,3,4},{5,6,7,8},{9,10,11,12}};</div></div><!-- fragment --><p>Using 2D std::vector </p><div class="fragment"><div class="line">std::vector&lt;std::vector&lt;float&gt;&gt; vect {{1,2,3,4},{5,6,7,8},{9,10,11,12}};</div><div class="line">MATOPS::Matrix&lt;float,3,4&gt; A(vect);</div></div><!-- fragment --><p>#### Transposing a small Matrix </p><div class="fragment"><div class="line">MATOPS::Matrix&lt;float,3,4&gt; A{{1,2,3,4},{5,6,7,8},{9,10,11,12}};</div><div class="line">std::cout&lt;&lt; A.transpose();</div></div><!-- fragment --><p>#### Multiplying 2 small Matrices </p><div class="fragment"><div class="line">MATOPS::Matrix&lt;float,3,4&gt; A{{1,2,3,4},{5,6,7,8},{9,10,11,12}};</div><div class="line">MATOPS::Matrix&lt;float,4,2&gt; B{{1,2},{5,6},{9,10},{3,4}};</div><div class="line">MATOPS::Matrix&lt;float,3,2&gt; C=A*B;</div><div class="line"></div><div class="line">std::cout&lt;&lt; C;</div><div class="line">//OR</div><div class="line">std::cout&lt;&lt;A*B;</div></div><!-- fragment --><h3>BigMatrix Class (for large Matrices)</h3>
<p>Since big Matrices are already defined in a csv file, we can just parse the files and find out the dimensions of the matrix. The only information to be given to the header file is the Datatype of the Matrix.</p>
<h4>BigMatrix Multiply (Strassen's Algorithm)</h4>
<p>Let there be 2 matrices A and B stored in 2 csv files namely A.csv and B.csv repectively. We wish to multiply both of them and store the result in a third file named Ans.csv . The code for this process is shown below.</p>
<div class="fragment"><div class="line">MATOPS::BigMatrix&lt;float&gt; MatObj; // Defining a Matrix object</div><div class="line"></div><div class="line">// Multiplying the two Matrices A.csv, B.csv and storing the result in Ans.csv</div><div class="line">MatObj.matmul(&quot;/path/to/A.csv&quot;,&quot;/path/to/B.csv&quot;,&quot;/path/to/Ans.csv&quot;);</div><div class="line"></div><div class="line">MatObj.Mat_print(&quot;/path/to/Ans.csv&quot;); // Printing the Answer</div></div><!-- fragment --> <h4>BigMatrix Transpose</h4>
<p>Given a matrix A in A.csv file, we wish to find out its transpose and store it in a new file A_trans.csv</p>
<div class="fragment"><div class="line">MATOPS::BigMatrix&lt;float&gt; MatObj; // Defining a Matrix object</div><div class="line">MatObj.Transpose(&quot;/path/to/A.csv&quot;, &quot;/path/to/A_trans.csv&quot;); // Transposing the matrix and store in a A_trans.csv</div><div class="line"></div><div class="line">MatOnj.Transpose(&quot;/path/to/A.csv&quot;); // In-place Matrix transpose.</div><div class="line"></div><div class="line">MatObj.Mat_print(&quot;/path/to/A_trans.csv&quot;); // Printing the result</div></div><!-- fragment --><h2>Example code</h2>
<div class="fragment"><div class="line">#include&lt;iostream&gt;</div><div class="line">#include &quot;matrix.h&quot;</div><div class="line">#include&lt;vector&gt;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line">using namespace MATOPS; //namespace for matrix.h</div><div class="line"></div><div class="line"></div><div class="line">int main() {</div><div class="line"></div><div class="line">    // Define matrices of size 2x4 and 2x2 of type double</div><div class="line">    Matrix&lt;double,2,4&gt; B{{1,2,4,5},{4,6,7,8}}; </div><div class="line">    Matrix&lt;double,2,2&gt; A{{1,2},{2,2}};</div><div class="line"></div><div class="line">    // Print the Matrices A and B followed by Product A*B and transpose of A</div><div class="line">    cout&lt;&lt;A&lt;&lt;&quot;\n \n&quot;&lt;&lt;B&lt;&lt;&quot;\n \n&quot;&lt;&lt; A*B&lt;&lt;&quot;\n\n&quot;&lt;&lt;A.transpose()&lt;&lt;&quot;\n\n&quot;;</div><div class="line"></div><div class="line">    BigMatrix&lt;float&gt; MatObj; // Define float object for Big Matrix</div><div class="line"></div><div class="line">    // Multiply two Matrices in .csv format and save the result in Ans.csv file.</div><div class="line">    MatObj.matmul(&quot;/path/to/A.csv&quot;,&quot;/path/to/B.csv&quot;,&quot;/path/to/Ans.csv&quot;);</div><div class="line"></div><div class="line">    // Read Matrix A from A.csv, find its Transpose and save it in A_trans.csv</div><div class="line">    MatObj.Transpose(&quot;/path/to/A.csv&quot;, &quot;/path/to/A_trans.csv&quot;);</div><div class="line"></div><div class="line">    // In-place Transpose: Read Matrix A from A.csv, find its Transpose and overwrite A.csv</div><div class="line">    MatObj.Transpose(&quot;/path/to/A.csv&quot;);</div><div class="line"></div><div class="line">    // print Matrix in file A.csv</div><div class="line">    MatObj.Mat_print(&quot;/path/to/A.csv&quot;);</div><div class="line"></div><div class="line">    return 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jan 31 2021 01:57:25 for Matrix Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
